// let allProduct = [
//   {
//     id: 1,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-07-easyon.png",
//     name: "air-force-1-07",
//     price: 340000,
//   },
//   {
//     id: 2,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-07-essential.png",
//     name: "air-force-1-07-essential",
//     price: 540000,
//   },
//   {
//     id: 3,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-07-lv8.png",
//     name: "air-force-1-07-lv8",
//     price: 315000,
//   },
//   {
//     id: 4,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-07-lx.png",
//     name: "air-force-1-07-lx",
//     price: 315000,
//   },
//   {
//     id: 5,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-07-next-nature.png",
//     name: "air-force-1-07-next-nature",
//     price: 315000,
//   },
//   {
//     id: 6,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-07-pro-tech.png",
//     name: "air-force-1-07-pro-tech",
//     price: 315000,
//   },
//   {
//     id: 7,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-07.png",
//     name: "air-force-1-07",
//     price: 850000,
//   },
//   {
//     id: 8,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-071-lv8.png",
//     name: "air-force-1-071-lv8",
//     price: 480000,
//   },
//   {
//     id: 9,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-071.png",
//     name: "air-force-1-071 ",
//     price: 720000,
//   },
//   {
//     id: 10,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-072.png",
//     name: "air-force-1-072 ",
//     price: 720000,
//   },
//   {
//     id: 11,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-074.png",
//     name: "air-force-1-074",
//     price: 720000,
//   },
//   {
//     id: 12,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-075.png",
//     name: "air-force-1-075 ",
//     price: 720000,
//   },
//   {
//     id: 13,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-076.png",
//     name: "air-force-1-076",
//     price: 720000,
//   },
//   {
//     id: 14,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-077.png",
//     name: "air-force-1-077 ",
//     price: 720000,
//   },
//   {
//     id: 15,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-078.png",
//     name: "air-force-1-078",
//     price: 720000,
//   },
//   {
//     id: 16,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-079.png",
//     name: "air-force-1-07",
//     price: 725000,
//   },
//   {
//     id: 17,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-le-older.png",
//     name: "air-force-1-le-older",
//     price: 720000,
//   },
//   {
//     id: 18,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-lv8-2-older.png",
//     name: "air-force-1-lv8-2-older",
//     price: 720000,
//   },
//   {
//     id: 19,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-lv8-5-older.png",
//     name: "air-force-1-lv8-5-older",
//     price: 720000,
//   },
//   {
//     id: 20,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-lv8-older.png",
//     name: "air-force-1-lv8-older ",
//     price: 725000,
//   },
//   {
//     id: 21,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-mid-07.png",
//     name: "air-force-1-mid-07",
//     price: 720000,
//   },
//   {
//     id: 22,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-mid-easyon-se-olde.png",
//     name: "air-force-1-mid-easyon-se",
//     price: 750000,
//   },
//   {
//     id: 23,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-mid-evo.png",
//     name: "air-force-1-mid-evo",
//     price: 720000,
//   },
//   {
//     id: 24,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-older.png",
//     name: "air-force-1-older",
//     price: 752000,
//   },
//   {
//     id: 25,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-pltaform.png",
//     name: "air-force-1-pltaform",
//     price: 71000,
//   },
//   {
//     id: 26,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-shadow.png",
//     name: "air-force-1-shadow",
//     price: 726500,
//   },
//   {
//     id: 27,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-shadow1.png",
//     name: "air-force-1-shadow1",
//     price: 820000,
//   },
//   {
//     id: 28,
//     category: 3,
//     img: "/folder_asset/af1/air-force-1-wild.jpg",
//     name: "air-force-1-wild",
//     price: 920000,
//   },
//   {
//     id: 29,
//     category: 3,
//     img: "/folder_asset/af1/force-1-low-lv8-easyon-younger-shoes.png",
//     name: "force-1-low-lv8-easyon-younger-shoes",
//     price: 650000,
//   },
//   {
//     id: 30,
//     category: 3,
//     img: "/folder_asset/af1/force-1-low-lv8-easyon-younger.png",
//     name: "force-1-low-lv8-easyon-younger",
//     price: 1920000,
//   },
//   {
//     id: 31,
//     category: 3,
//     img: "/folder_asset/af1/force-1-lv8.png",
//     name: "force-1-lv8",
//     price: 926000,
//   },
//   {
//     id: 32,
//     category: 3,
//     img: "/folder_asset/af1/lunar-force-1-duckboot.png",
//     name: "lunar-force-1-duckboot",
//     price: 1206000,
//   },
//   {
//     id: 33,
//     category: 2,
//     img: "/folder_asset/jodan/Air Jordan 1 Low SE.png",
//     name: "Air Jordan 1 Low SE",
//     price: 340000,
//   },
//   {
//     id: 34,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-elevate-low.png",
//     name: "air-jordan-1-elevate-low",
//     price: 350000,
//   },
//   {
//     id: 35,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-elevate-low1.png",
//     name: "air-jordan-1-elevate-low1",
//     price: 340000,
//   },
//   {
//     id: 36,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-g-golf.png",
//     name: "air-jordan-1-low-g-golf",
//     price: 340000,
//   },
//   {
//     id: 37,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-se-1.png",
//     name: "air-jordan-1-low-se-1",
//     price: 340000,
//   },
//   {
//     id: 38,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-elevate2.png",
//     name: "air-jordan-1-elevate2",
//     price: 340000,
//   },
//   {
//     id: 39,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-se-craft.png",
//     name: "air-jordan-1-low-se-craft",
//     price: 340000,
//   },
//   {
//     id: 40,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-se.png",
//     name: "air-jordan-1-low-se",
//     price: 340000,
//   },
//   {
//     id: 41,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-se1.png",
//     name: "air-jordan-1-low-se1",
//     price: 340000,
//   },
//   {
//     id: 42,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-se2.png",
//     name: "air-jordan-1-low-se2",
//     price: 340000,
//   },
//   {
//     id: 43,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-se3.png",
//     name: "air-jordan-1-low-se3",
//     price: 340000,
//   },
//   {
//     id: 44,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low-se4.png",
//     name: "air-jordan-1-low-se4",
//     price: 340000,
//   },
//   {
//     id: 45,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low.png",
//     name: "air-jordan-1-low",
//     price: 340000,
//   },
//   {
//     id: 46,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low1.png",
//     name: "air-jordan-1-low1",
//     price: 340000,
//   },
//   {
//     id: 47,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low2.png",
//     name: "air-jordan-1-low2",
//     price: 340000,
//   },
//   {
//     id: 48,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low2.png",
//     name: "air-jordan-1-low2",
//     price: 340000,
//   },
//   {
//     id: 49,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low3.png",
//     name: "air-jordan-1-low3",
//     price: 340000,
//   },
//   {
//     id: 50,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low4.png",
//     name: "air-jordan-1-low4",
//     price: 340000,
//   },
//   {
//     id: 51,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-low5.png",
//     name: "air-jordan-1-low5",
//     price: 340000,
//   },
//   {
//     id: 52,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid-se-older.png",
//     name: "air-jordan-1-mid-se-older",
//     price: 340000,
//   },
//   {
//     id: 53,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid-se.png",
//     name: "air-jordan-1-mid-se",
//     price: 340000,
//   },
//   {
//     id: 54,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid-se1.png",
//     name: "air-jordan-1-mid-se1",
//     price: 340000,
//   },
//   {
//     id: 55,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid-se2.png",
//     name: "air-jordan-1-mid-se2",
//     price: 340000,
//   },
//   {
//     id: 56,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid-se3.png",
//     name: "air-jordan-1-mid-se3",
//     price: 340000,
//   },
//   {
//     id: 57,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid.png",
//     name: "air-jordan-1-mid",
//     price: 340000,
//   },
//   {
//     id: 58,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid2.png",
//     name: "air-jordan-1-mid-se2",
//     price: 340000,
//   },
//   {
//     id: 59,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid3.png",
//     name: "air-jordan-1-mid3",
//     price: 340000,
//   },
//   {
//     id: 60,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid4.png",
//     name: "air-jordan-1-mid-se4",
//     price: 340000,
//   },
//   {
//     id: 61,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid5.png",
//     name: "air-jordan-1-mid5",
//     price: 340000,
//   },
//   {
//     id: 62,
//     category: 2,
//     img: "/folder_asset/jodan/jordan-1-low-alt-younger.png",
//     name: "jordan-1-low-alt-younger",
//     price: 340000,
//   },
//   {
//     id: 63,
//     category: 2,
//     img: "/folder_asset/jodan/jordan-1-low-alt-younger1.png",
//     name: "jordan-1-low-alt-younger1",
//     price: 340000,
//   },
//   {
//     id: 64,
//     category: 2,
//     img: "/folder_asset/jodan/air-jordan-1-mid5.png",
//     name: "/folder_asset/jodan/jordan-1-mid-se-younger.png",
//     price: 340000,
//   },
//   {
//     id: 65,
//     category: 1,
//     img: "/folder_asset/air max/air-max-1-shoes-KcSx0w.png",
//     name: "air-max-1",
//     price: 315000,
//   },
//   {
//     id: 66,
//     category: 1,
//     img: "/folder_asset/air max/air-max-270-shoes-2V5C4p.png",
//     name: "air-max-270",
//     price: 785000,
//   },
//   {
//     id: 67,
//     category: 1,
//     img: "/folder_asset/air max/air-max-270-shoes-vjpNZc.png",
//     name: "air-max-270-shoes-vjpNZc",
//     price: 958000,
//   },
//   {
//     id: 68,
//     category: 1,
//     img: "/folder_asset/air max/air-max-90-lv8-shoes-5KhTdP.png",
//     name: "air-max-90-lv8",
//     price: 958000,
//   },
//   {
//     id: 69,
//     category: 1,
//     img: "/folder_asset/air max/air-max-90-shoes-K0mczj.png",
//     name: "air-max-90",
//     price: 958000,
//   },
//   {
//     id: 70,
//     category: 1,
//     img: "/folder_asset/air max/air-max-ap-shoes-3Rdq04.png",
//     name: "air-max-ap",
//     price: 958000,
//   },
//   {
//     id: 71,
//     category: 1,
//     img: "/folder_asset/air max/air-max-dn-older-shoes-xkSP9x.png",
//     name: "air-max-dn-older",
//     price: 958000,
//   },
//   {
//     id: 72,
//     category: 1,
//     img: "/folder_asset/air max/air-max-dn-shoes-drXjb8.png",
//     name: "air-max-dn",
//     price: 958000,
//   },
//   {
//     id: 73,
//     category: 1,
//     img: "/folder_asset/air max/air-max-dn-shoes-FtLNfm.png",
//     name: "air-max-dn",
//     price: 958000,
//   },
//   {
//     id: 74,
//     category: 1,
//     img: "/folder_asset/air max/air-max-excee-shoes-xBwQhG.png",
//     name: "air-max-excee",
//     price: 958000,
//   },
//   {
//     id: 75,
//     category: 1,
//     img: "/folder_asset/air max/air-max-excee-shoes-Zvl8cs.png",
//     name: "air-max-excee",
//     price: 958000,
//   },
//   {
//     id: 76,
//     category: 1,
//     img: "/folder_asset/air max/air-max-furyosa-nrg-shoes-jKWgZB.png",
//     name: "air-max-furyosa-nrg",
//     price: 958000,
//   },
//   {
//     id: 77,
//     category: 1,
//     img: "/folder_asset/air max/air-max-plus-drift-shoes-FCM3Rg.png",
//     name: "air-max-270-shoes-vjpNZc",
//     price: 958000,
//   },
//   {
//     id: 78,
//     category: 1,
//     img: "/folder_asset/air max/air-max-plus-shoes-B03LHK.png",
//     name: "air-max-plus",
//     price: 958000,
//   },
//   {
//     id: 79,
//     category: 1,
//     img: "/folder_asset/air max/air-max-pulse-shoes-V9B1C5.png",
//     name: "air-max-pulse",
//     price: 958000,
//   },
//   {
//     id: 80,
//     category: 1,
//     img: "/folder_asset/air max/air-max-solo-shoes-000Gh6.png",
//     name: "air-max-solo",
//     price: 958000,
//   },
//   {
//     id: 81,
//     category: 1,
//     img: "/folder_asset/air max/air-max-solo-shoes-qVq5jJ.png",
//     name: "air-max-solo",
//     price: 958000,
//   },
// ];
// localStorage.setItem("allProduct", JSON.stringify(allProduct));
let allProduct = JSON.parse(localStorage.getItem("allProduct"));
let Productcontainer = document.getElementById("allProduct-section");

// let nikeProduct = nikeList.filter(function (e, i) {
//   return e.category === 3;
// });

// check đăng nhập
let iconLogin = document.getElementById("icon-login");
iconLogin.addEventListener("click", function () {
  let checkIconLogin = JSON.parse(localStorage.getItem("checkLogin"));
  if (checkIconLogin) {
    window.location.href = "/folder_pages/myaccount.html";
  } else {
    window.location.href = "/folder_pages/login.html";
  }
});

// so san pham tren 1 trang là 12 sản phẩm
let totalItem = allProduct.length;
let itempage = 12;
let totalPage = Math.ceil(totalItem / itempage);
let currentPage = 0;
let start = 0;
let end = 0;
let pagination = document.getElementsByClassName("pagination")[0];
for (let i = 1; i < totalPage + 1; i++) {
  pagination.innerHTML += `
  <div class="chuyentrang">
    <a href="#" onclick="trang(${i})">${i}</a>
  </div>
  `;
}
// tong so trang 5 trang
function trang(page) {
  currentPage = page;
  start = (currentPage - 1) * itempage;
  end = currentPage * itempage;
  render();
}
function render() {
  Productcontainer.innerHTML = "";
  for (let i = 0; i < allProduct.length; i++) {
    if (i >= start && i < end) {
      Productcontainer.innerHTML += `
        <div class="product" id="product-container-1">
            <div class="photo">
                <img src="${allProduct[i].img}" style="width:100%" alt="photo" />
            </div>

            <h4 class="h4-product">
                ${allProduct[i].name}
            </h4>
            <p class="value">₫ ${allProduct[i].price}</p>
            <div class="tong">
                <div class="icons icon-heart">
                <i class="fa-regular fa-heart"></i>
                </div>
                <button class="timhieuthem"><a href="#" style="text-decoration: none">Tìm hiểu thêm</a></button>
                <div class="icons icon-heart" id="${allProduct[i].id}" onclick ="addToCart(${allProduct[i].id})">
                  <ion-icon name="cart-outline"></ion-icon>
                </div>
            </div>
        </div>`;
    }
  }
}
trang(1);
function addToCart(productId) {
  let checkLogin = JSON.parse(localStorage.getItem("checkLogin"));
  if (checkLogin == null) {
    return; // gặp return dừng chương trình luôn
  }
  let users = JSON.parse(localStorage.getItem("users"));
  for (let i = 0; i < users.length; i++) {
    if (users[i].id == checkLogin) {
      alert("mua hàng thành công ");
      for (let j = 0; j < productList.length; j++) {
        if (productId == productList[j].id) {
          console.log("giỏ hàng của user sẽ là ", users[i].cart);
          let index = users[i].cart.findIndex((item, index) => {
            return item.id == productId;
          });
          if (index == -1) {
            //tức là không có thêm bình thường
            console.log("chưa có ");
            users[i].cart.push({ ...productList[j], quantity: 1 });
            localStorage.setItem("users", JSON.stringify(users));
            showQuantityCart();
          } else {
            users[i].cart[index].quantity = ++users[i].cart[index].quantity;
            localStorage.setItem("users", JSON.stringify(users));
          }
        }
      }
    }
  }
}
// function hiển thị số lượng sản phẩm
function showQuantityCart() {
  // lấy giỏ hàng ra.length là được
  let checkLogin = JSON.parse(localStorage.getItem("checkLogin"));
  let users = JSON.parse(localStorage.getItem("users"));
  for (let i = 0; i < users.length; i++) {
    if (users[i].id == checkLogin) {
      // console.log(users[i].cart);
      // document.getElementsByClassName("itemInCart")[0].innerHTML =
      //   users[i].cart.length;
    }
  }
}
showQuantityCart();
// tìm kiếm
let searchData = document.getElementById("search");
let datasearch = [];
let sanphamtimthay = document.getElementsByClassName("sanphamtimthay")[0];

function searchProduct() {
  datasearch = [];
  for (let i = 0; i < allProduct.length; i++) {
    let check = allProduct[i].name.includes(searchData.value);
    if (check) {
      datasearch.push(allProduct[i]);
    }
  }
  if (datasearch) {
    console.log(datasearch);
    for (let index in datasearch) {
      Productcontainer.innerHTML += `
          <div class="product" id="product-container-1">
              <div class="photo">
                  <img src="${datasearch[index].img}" style="width:100%" alt="photo" />
              </div>
    
              <h4 class="h4-product">
                  ${datasearch[index].name}
              </h4>
              <p class="value">₫ ${datasearch[index].price}</p>
              <div class="tong">
                  <div class="icons icon-heart">
                  <i class="fa-regular fa-heart"></i>
                  </div>
                  <button class="timhieuthem"><a href="#" style="text-decoration: none">Tìm hiểu thêm</a></button>
                  <div class="icons icon-heart" id="${datasearch[index].id}" onclick ="addToCart(${datasearch[index].id})">
                    <ion-icon name="cart-outline"></ion-icon>
                  </div>
              </div>
          </div>
      `;
    }
  } else {
    Productcontainer.innerHTML += `
     <h3> không tìm thấy sản phẩm nào </h3>
    `;
  }
}
